(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0GIF":function(e,n,t){var r=t("mp5j");e.exports=(r.default||r).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,r,a){return'<div class="container container--header container--my-library">\r\n  <div class="nav">\r\n\r\n    <a href="./index.html" class="nav__logo-link">\r\n      <svg class="nav__logo-icon" width="24" height="24">\r\n        <use href="./images/symbol-defs.svg#icon-logo"></use>\r\n      </svg>\r\n      <h1 class="nav__logo-tittle">Filmoteka</h1>\r\n    </a>\r\n\r\n    <nav class="nav__site">\r\n      <ul class="nav__site-list list">\r\n        <li class="nav__site-item"><a href="./index.html" class="nav__site-link">home</a></li>\r\n        <li class="nav__site-item"><a href="./library-page.html"\r\n            class="nav__site-link js-library nav__site-link--current">my\r\n            library</a></li>\r\n      </ul>\r\n    </nav>\r\n\r\n  </div>\r\n\r\n  <div class="button-box">\r\n    <button class="button btn-library js-btn-render-watched">watched</button>\r\n    <button class="button btn-library js-btn-render-queue">queue</button>\r\n\r\n  </div>\r\n</div>'},useData:!0})},QfWi:function(e,n,t){"use strict";t.r(n);t("iPZ8"),t("kypl"),t("pCzD"),t("RtS0"),t("4owi"),t("/YXa"),t("lmye"),t("WB5j"),t("D/wG"),t("fp7Y"),t("wCa+"),t("JBxO"),t("9UJh"),t("WoWj"),t("3dw1"),t("U00V"),t("yjly");var r,a,o={inputRef:document.querySelector(".search-form"),galleryRef:document.querySelector(".movie__list"),modalRef:document.querySelector(".card"),modalBoxRef:document.querySelector(".card-box"),galContainerRef:document.querySelector(".js-container"),prevBtnRef:document.querySelector("#js-prev-btn"),nextBtnRef:document.querySelector("#js-next-btn"),btnCloseModalRef:document.querySelector(".card__btn-close"),modalBackdropRef:document.querySelector(".backdrop"),paginBtnsRef:document.querySelectorAll(".pagination__page-btn"),paginBtnWrapper:document.querySelector(".pagination__page-numbers"),libraryLinkRef:document.querySelector(".js-library"),libraryInsertPlaceRef:document.querySelector(".my-library")};t("FdtR");var l=(r={searchUrl:"https://api.themoviedb.org/3/search/movie?api_key=",trendingUrl:"https://api.themoviedb.org/3/trending/movie/week?api_key=",movieDetailsUrl:"https://api.themoviedb.org/3/movie/",movieGenreList:"https://api.themoviedb.org/3/genre/movie/list?api_key=",apiKey:"3550330ecc32a34c7342dbd44dd96d6e",movieID:0,searchQuerry:"",page:2,fetchSearchRequestGallery:function(){var e=""+this.searchUrl+this.apiKey+"&language=en-US&query="+this.searchQuerry+"&page="+this.page;return fetch(e).then((function(e){if(e.ok)return e.json();throw new Error(e.status)})).then((function(e){return e})).catch((function(e){return console.log(e)}))},fetchPopularMovieGallery:function(){var e=""+this.trendingUrl+this.apiKey+"&page="+this.page;return fetch(e).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))},fetchMovieInfo:function(){var e=""+this.movieDetailsUrl+this.movieID+"?api_key="+this.apiKey+"&language=en-US";return fetch(e).then((function(e){return e.json()})).then((function(e){return e.results})).catch((function(e){return console.log(e)}))},fetchGenresList:function(){var e=""+this.movieGenreList+this.apiKey+"&language=en-US";return fetch(e).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))},resetPage:function(){this.page=1},get query(){return this.searchQuerry},set query(e){this.searchQuerry=e}},"movieID",(a={}).movieID=a.movieID||{},a.movieID.get=function(){return this.movieID},"movieID",a.movieID=a.movieID||{},a.movieID.set=function(e){this.movieID=e},function(e,n){for(var t in n){(o=n[t]).configurable=o.enumerable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,t,o)}if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(n),a=0;a<r.length;a++){var o,l=r[a];(o=n[l]).configurable=o.enumerable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,l,o)}}(r,a),r),i=t("RsKt"),s=t.n(i),c=t("0GIF"),u=t.n(c),d=t("s9S4"),p=t.n(d);function m(){o.modalBackdropRef.classList.toggle("is-hidden"),o.modalBoxRef.innerHTML=""}function f(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return h(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function h(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}o.btnCloseModalRef.addEventListener("click",m),o.modalBackdropRef.addEventListener("click",(function(e){e.target===e.currentTarget&&m()})),window.addEventListener("keydown",(function(e){"Escape"!==e.code||o.modalBackdropRef.classList.contains("is-hidden")||(m(),console.log("adasd"))}));var g,_,v=t("9va6"),y=o.inputRef,b=o.galleryRef,R=document.querySelector("#js-backdrop"),j={currentPage:1,totalPages:null,totalResults:null,error:!1},w=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],L=[],k=[],S={};function P(e,n){var t,r=!1;(e.forEach((function(e,n){e.poster_path===S.poster_path&&(r=!0)})),r)||(e.push(S),localStorage.setItem(n,(t=e,JSON.stringify(t))))}function I(e){return JSON.parse(e)}function M(){j.error=!1,o.galleryRef.classList.remove("movie__list--error"),l.fetchPopularMovieGallery().then((function(e){return j.currentPage=e.page,j.totalPages=e.total_pages,j.totalResults=e.total_results,e})).then((function(e){var n=e.results;console.log(l.page),x(q(n,w))}))}function q(e,n){var t=e.map((function(e){if(null===e.poster_path)e.poster_path="https://i.ibb.co/hWJT4yj/noImage.jpg";else{var t="https://image.tmdb.org/t/p/w500/"+e.poster_path;e.poster_path=t}var r=e.release_date.slice(0,4),a=[];return e.genre_ids.forEach((function(e){for(var t,r=f(n);!(t=r()).done;){var o=t.value;o.id===e&&a.push(o.name)}})),Object.assign({},e,{genre_ids:a,release_date:r})}));return g=t,console.log(g),t}function x(e){var n=s()(e);b.insertAdjacentHTML("beforeend",n)}function T(){b.innerHTML="",l.fetchSearchRequestGallery().then((function(e){return j.currentPage=e.page,j.totalPages=e.total_pages,j.totalResults=e.total_results,e})).then((function(e){var n=e.results;0===n.length?E(o.galleryRef):x(q(n,w))})).catch((function(e){return console.log(e)}))}function E(e){j.error=!0,o.galleryRef.classList.add("movie__list--error");e.insertAdjacentHTML("afterbegin",'<div class="error">\n  <div class="error-img"><img src="https://i.ibb.co/4WvT00q/caterror.jpg" alt="" width="300"></div>\n\n  <p class="gallery__failure"> Unfortunately, no matches found. <span>Try again!</span> </p>\n</div>')}console.log(o.paginBtnsRef),o.prevBtnRef.addEventListener("click",(function(){if(1===l.page||j.error)return;if(y.value)return b.innerHTML="",l.page-=1,void T();b.innerHTML="",l.page-=1,console.log(l.page),M()})),o.nextBtnRef.addEventListener("click",(function(){if(console.log(j.totalPages),l.page===j.totalPages||j.error)return;if(y.value)return b.innerHTML="",l.page+=1,void T();b.innerHTML="",l.page+=1,console.log(l.page),M()})),o.paginBtnWrapper.addEventListener("click",(function(e){if("BUTTON"===e.target.nodeName){var n=e.target.textContent;l.page=Number(n),console.log(n),l.searchQuerry?T():(b.innerHTML="",M())}})),(_=localStorage.getItem("watchedMovies"))&&(L=I(_)),function(){var e=localStorage.getItem("moviesInQueue");e&&(k=I(e))}(),M(),y.addEventListener("input",v.debounce((function(e){if(l.resetPage(),j.error=!1,o.galleryRef.classList.remove("movie__list--error"),l.searchQuerry="",l.searchQuerry=y.value,console.log(l.page),!e.target.value)return;b.innerHTML="",l.fetchSearchRequestGallery().then((function(e){return console.log(e),j.currentPage=e.page,j.totalPages=e.total_pages,j.totalResults=e.total_results,e})).then((function(e){var n=e.results;0===n.length?E(o.galleryRef):x(q(n,w))})).catch((function(e){return console.log(e)}))}),1e3)),b.addEventListener("click",(function(e){if("IMG"!==e.target.nodeName)return;var n=e.target.dataset.compare;g.forEach((function(e){e.poster_path===n&&(console.log(e),S=Object.assign({},e))})),t=S,r=p()(t),o.modalBoxRef.insertAdjacentHTML("afterbegin",r),R.classList.remove("is-hidden"),console.log(S);var t,r})),o.libraryLinkRef.addEventListener("click",(function(){o.libraryInsertPlaceRef.innerHTML="",b.innerHTML="",e=u()(),o.libraryInsertPlaceRef.insertAdjacentHTML("afterbegin",e);var e})),o.libraryInsertPlaceRef.addEventListener("click",(function(e){e.target.classList.contains("js-btn-render-watched")&&(b.innerHTML="",x(L))})),o.modalBoxRef.addEventListener("click",(function(e){e.target.classList.contains("js-btn-watched")&&P(L,"watchedMovies")})),o.libraryInsertPlaceRef.addEventListener("click",(function(e){e.target.classList.contains("js-btn-render-queue")&&(b.innerHTML="",x(k))})),o.modalBoxRef.addEventListener("click",(function(e){e.target.classList.contains("js-btn-queue")&&P(k,"moviesInQueue")}))},RsKt:function(e,n,t){var r=t("mp5j");e.exports=(r.default||r).template({1:function(e,n,t,r,a){var o,l,i=null!=n?n:e.nullContext||{},s=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<li class="poster">\r\n  <div class="poster__img-wrap">\r\n    <img src="'+c("function"==typeof(l=null!=(l=u(t,"poster_path")||(null!=n?u(n,"poster_path"):n))?l:s)?l.call(i,{name:"poster_path",hash:{},data:a,loc:{start:{line:4,column:14},end:{line:4,column:29}}}):l)+'" data-compare="'+c("function"==typeof(l=null!=(l=u(t,"poster_path")||(null!=n?u(n,"poster_path"):n))?l:s)?l.call(i,{name:"poster_path",hash:{},data:a,loc:{start:{line:4,column:45},end:{line:4,column:60}}}):l)+'" alt="movie-poster" class="poster__img">\r\n  </div>\r\n  <div class="poster__content-wrap">\r\n    <h3 class="poster__movie-name">'+c("function"==typeof(l=null!=(l=u(t,"original_title")||(null!=n?u(n,"original_title"):n))?l:s)?l.call(i,{name:"original_title",hash:{},data:a,loc:{start:{line:7,column:35},end:{line:7,column:53}}}):l)+'</h3>\r\n    <div class="poster__movie-info-wrap">\r\n      <ul class="poster__genre-list list">\r\n'+(null!=(o=u(t,"each").call(i,null!=n?u(n,"genre_ids"):n,{name:"each",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a,loc:{start:{line:10,column:8},end:{line:13,column:17}}}))?o:"")+'        <p class="poster__genre-item">&nbsp| '+c("function"==typeof(l=null!=(l=u(t,"release_date")||(null!=n?u(n,"release_date"):n))?l:s)?l.call(i,{name:"release_date",hash:{},data:a,loc:{start:{line:14,column:45},end:{line:14,column:61}}}):l)+"</p>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</li>\r\n"},2:function(e,n,t,r,a){return'        <li class="poster__genre-item">\r\n          '+e.escapeExpression(e.lambda(n,n))+"<span>,&nbsp;</span></li>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,n,t,r,a){var o;return null!=(o=(e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]})(t,"each").call(null!=n?n:e.nullContext||{},n,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:0},end:{line:19,column:9}}}))?o:""},useData:!0})},s9S4:function(e,n,t){var r=t("mp5j");e.exports=(r.default||r).template({1:function(e,n,t,r,a){return'            <li class="card__info-content__genre-item">'+e.escapeExpression(e.lambda(n,n))+"<span>,&nbsp;</span></li>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,n,t,r,a){var o,l,i=null!=n?n:e.nullContext||{},s=e.hooks.helperMissing,c="function",u=e.escapeExpression,d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="card__img-wrap">\r\n  <img src="'+u(typeof(l=null!=(l=d(t,"poster_path")||(null!=n?d(n,"poster_path"):n))?l:s)===c?l.call(i,{name:"poster_path",hash:{},data:a,loc:{start:{line:2,column:12},end:{line:2,column:27}}}):l)+'" alt="modal__img" class="card__img js-modal-search">\r\n</div>\r\n<div class="card__content-wrap">\r\n  <h3 class="card__title">'+u(typeof(l=null!=(l=d(t,"original_title")||(null!=n?d(n,"original_title"):n))?l:s)===c?l.call(i,{name:"original_title",hash:{},data:a,loc:{start:{line:5,column:26},end:{line:5,column:44}}}):l)+'</h3>\r\n  <div class="card__info-wrap">\r\n    <div class="card__info-title">\r\n      <ul class="card__info-title__list list">\r\n        <li class="card__info-title__item">Vote / Votes</li>\r\n        <li class="card__info-title__item">Popularity</li>\r\n        <li class="card__info-title__item">Original Title</li>\r\n        <li class="card__info-title__item">Genre</li>\r\n      </ul>\r\n    </div>\r\n    <div class="card__info-content">\r\n      <ul class="card__info-content__list list">\r\n        <li class="card__info-content__item"><span>'+u(typeof(l=null!=(l=d(t,"vote_average")||(null!=n?d(n,"vote_average"):n))?l:s)===c?l.call(i,{name:"vote_average",hash:{},data:a,loc:{start:{line:17,column:51},end:{line:17,column:67}}}):l)+"</span>&nbsp;/&nbsp;<span>"+u(typeof(l=null!=(l=d(t,"vote_count")||(null!=n?d(n,"vote_count"):n))?l:s)===c?l.call(i,{name:"vote_count",hash:{},data:a,loc:{start:{line:17,column:93},end:{line:17,column:107}}}):l)+'</span></li>\r\n        <li class="card__info-content__item">'+u(typeof(l=null!=(l=d(t,"popularity")||(null!=n?d(n,"popularity"):n))?l:s)===c?l.call(i,{name:"popularity",hash:{},data:a,loc:{start:{line:18,column:45},end:{line:18,column:59}}}):l)+'</li>\r\n        <li class="card__info-content__item">'+u(typeof(l=null!=(l=d(t,"original_title")||(null!=n?d(n,"original_title"):n))?l:s)===c?l.call(i,{name:"original_title",hash:{},data:a,loc:{start:{line:19,column:45},end:{line:19,column:63}}}):l)+'</li>\r\n        <li class="card__info-content__item">\r\n          <ul class="card__info-content__genre-list list">\r\n'+(null!=(o=d(t,"each").call(i,null!=n?d(n,"genre_ids"):n,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:22,column:12},end:{line:24,column:21}}}))?o:"")+'          </ul>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n  <p class="card__description-title">About</p>\r\n  <p class="card__description">'+u(typeof(l=null!=(l=d(t,"overview")||(null!=n?d(n,"overview"):n))?l:s)===c?l.call(i,{name:"overview",hash:{},data:a,loc:{start:{line:31,column:31},end:{line:31,column:43}}}):l)+'</p>\r\n  <div class="card__btn-box">\r\n    <button type="button" class="button card__btn js-btn-watched">add to Watched</button>\r\n    <button type="button" class="button card__btn js-btn-queue">add to queue</button>\r\n  </div>\r\n</div>'},useData:!0})},yjly:function(e,n,t){}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.fae26ef87860bc428484.js.map